<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>MSP432E4 DriverLib API Guide: Ethernet_api</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MSP432E4 DriverLib API Guide
   &#160;<span id="projectnumber">1.11.00.03</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Ethernet_api</div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="ethernet_intro"></a>
Introduction</h1>
<p>The MSP432E4 Ethernet controller consists of a fully integrated media access controller (MAC) and a network physical (PHY) interface device. The Ethernet controller conforms to IEEE 802.3 specifications and fully supports 10BASE-T and 100BASE-TX standards. Some devices do not have an integrated PHY and can be used with an external PHY or multiple PHYs. See the device data sheet for details.</p>
<p>The Ethernet API provides the set of functions required to implement an interrupt-driven Ethernet driver for this Ethernet controller. Functions are provided to configure and control the MAC, to access the register set on the PHY, to transmit and receive Ethernet packets, and to configure and control the interrupts that are available.</p>
<h1><a class="anchor" id="ethernet_api_functions"></a>
API Functions</h1>
<p>For any application, the EthernetInitExpClk() function must be called first to prepare the Ethernet controller for operation. This function configures the Ethernet controller options that are based on system parameters, such as the system clock speed.</p>
<p>Once initialized, access to the PHY is available via the EthernetPHYRead() and EthernetPHYWrite() functions. By default, the PHY auto-negotiates the line speed and duplex modes. For most applications, this configuration is sufficient. If a special configuration is required, the PHY read and write functions can be used to reconfigure the PHY to the desired mode of operation.</p>
<p>The MAC must also be configured using the EthernetConfigSet() function. The parameters for this function allow the configuration of options such as Promiscuous Mode, Multicast Reception, Transmit Data Length Padding, and so on. The EthernetConfigGet() function can be used to query the current configuration of the Ethernet MAC.</p>
<p>The MAC address, used for incoming packet filtering, must also be programmed using the EthernetMACAddrSet() function. The current value can be queried using the EthernetMACAddrGet() function.</p>
<p>When configuration has been completed, the Ethernet controller can be enabled using the EthernetEnable() function. When getting ready to terminate operations on the Ethernet controller, the EthernetDisable() function may be called.</p>
<p>After the Ethernet controller has been enabled, Ethernet frames can be transmitted and received using the EthernetPacketPut() and EthernetPacketGet() functions. Care must be taken when using these functions, as they are blocking functions, and do not return until data is available (for RX) or buffer space is available (for TX). The EthernetSpaceAvail() and EthernetPacketAvail() functions can be called to determine if there is room for a TX packet or if there is an RX packet available prior to calling these blocking functions. Alternatively, the EthernetPacketGetNonBlocking() and EthernetPacketPutNonBlocking() functions return immediately if a packet cannot be processed. Otherwise, the packet is processed normally.</p>
<p>When developing a mapping layer for a TCP/IP stack, you may wish to use the interrupt capability of the Ethernet controller. The EthernetIntRegister() and EthernetIntUnregister() functions are used to register an ISR with the system and to enable or disable the Ethernet controller's interrupt signal. The EthernetIntEnable() and EthernetIntDisable() functions are used to manipulate the individual interrupt sources available in the Ethernet controller (for example, RX Error, TX Complete). The EthernetIntStatus() and EthernetIntClear() functions are used to query the active interrupts to determine which process to service, and to clear the indicated interrupts prior to returning from the registered ISR.</p>
<p>The EthernetInit(), EthernetPacketNonBlockingGet(), and EthernetPacketNonBlockingPut() APIs from previous versions of the peripheral driver library have been replaced by the EthernetInitExpClk(), EthernetPacketGetNonBlocking(), and EthernetPacketPutNonBlocking() APIs, respectively. Macros have been provided in <code>ethernet.h</code> to map the old APIs to the new APIs, allowing existing applications to link and run with the new APIs. It is recommended that new applications use the new APIs rather than the old ones.</p>
<h1><a class="anchor" id="ethernet_example"></a>
Programming Example</h1>
<p>The following example shows how to use the this API to initialize the Ethernet controller to transmit and receive packets.</p>
<div class="fragment"><div class="line">uint8_t pui8MACAddress[6];</div><div class="line">uint8_t pui8MyRxPacket[];</div><div class="line">uint8_t pui8MyTxPacket[];</div><div class="line">uint32_t ui32MyTxPacketLength;</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Initialize the Ethernet controller for operation</span></div><div class="line"><span class="comment">//</span></div><div class="line">EthernetInitExpClk(ETH_BASE, SysCtlClockGet());</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Configure the Ethernet controller for normal operation</span></div><div class="line"><span class="comment">// Enable TX Duplex Mode</span></div><div class="line"><span class="comment">// Enable TX Padding</span></div><div class="line"><span class="comment">//</span></div><div class="line">EthernetConfigSet(ETH_BASE, (ETH_CFG_TX_DPLXEN | ETH_CFG_TX_PADEN));</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Program the MAC Address (01-23-45-67-89-AB)</span></div><div class="line"><span class="comment">//</span></div><div class="line">pui8MACAddress[0] = 0x01;</div><div class="line">pui8MACAddress[1] = 0x23;</div><div class="line">pui8MACAddress[2] = 0x45;</div><div class="line">pui8MACAddress[3] = 0x67;</div><div class="line">pui8MACAddress[4] = 0x89;</div><div class="line">pui8MACAddress[5] = 0xAB;</div><div class="line">EthernetMACAddrSet(ETH_BASE, pui8MACAddress);</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Enable the Ethernet controller</span></div><div class="line"><span class="comment">//</span></div><div class="line">EthernetEnable(ETH_BASE);</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Send a packet.</span></div><div class="line"><span class="comment">// (assume that the packet has been filled in appropriately elsewhere</span></div><div class="line"><span class="comment">// in the code).</span></div><div class="line"><span class="comment">//</span></div><div class="line">EthernetPacketPut(ETH_BASE, pui8MyTxPacket, ui32MyTxPacketLength);</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Wait for a packet to come in.</span></div><div class="line"><span class="comment">//</span></div><div class="line">EthernetPacketGet(ETH_BASE, pui8MyRxPacket, <span class="keyword">sizeof</span>(pui8MyRxPacket));</div></div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2019</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
