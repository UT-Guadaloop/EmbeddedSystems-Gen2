<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>Network Services API: SNTP Client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Services API
   &#160;<span id="projectnumber">2.75.00.17</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SNTP Client</div>  </div>
</div><!--header-->
<div class="contents">

<p>The SNTP client provides APIs to synchronize the local time with a server that provides time synchronization services using Network Time Protocol (NTP).  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf28840559d2f511e3fc376102bbc8837"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#gaf28840559d2f511e3fc376102bbc8837">SNTP_getTime</a> (const char *srvList[], const uint32_t srvCount, <a class="el" href="group__SlNetSock.html#gabe4a9f6015bc289d3342f2e3df8ecbe7">SlNetSock_Timeval_t</a> *timeout, uint64_t *ntpTimeStamp)</td></tr>
<tr class="memdesc:gaf28840559d2f511e3fc376102bbc8837"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the UTC time from NTP servers list.  <a href="#gaf28840559d2f511e3fc376102bbc8837">More...</a><br /></td></tr>
<tr class="separator:gaf28840559d2f511e3fc376102bbc8837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49f27dfff681fb9bdde566c23aa6f6d8"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#ga49f27dfff681fb9bdde566c23aa6f6d8">SNTP_getTimeByAddr</a> (<a class="el" href="structSlNetSock__Addr__t.html">SlNetSock_Addr_t</a> *server, <a class="el" href="group__SlNetSock.html#gabe4a9f6015bc289d3342f2e3df8ecbe7">SlNetSock_Timeval_t</a> *timeout, uint64_t *ntpTimeStamp)</td></tr>
<tr class="memdesc:ga49f27dfff681fb9bdde566c23aa6f6d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the UTC time from NTP server address.  <a href="#ga49f27dfff681fb9bdde566c23aa6f6d8">More...</a><br /></td></tr>
<tr class="separator:ga49f27dfff681fb9bdde566c23aa6f6d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
SNTP Error Codes</h2></td></tr>
<tr class="memitem:ga56b9d7c1429ae4fa08c2ed3f2e180fa0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#ga56b9d7c1429ae4fa08c2ed3f2e180fa0">SNTP_EGETHOSTBYNAMEFAIL</a>&#160;&#160;&#160;(-100)</td></tr>
<tr class="memdesc:ga56b9d7c1429ae4fa08c2ed3f2e180fa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failed to resolve Host address.  <a href="#ga56b9d7c1429ae4fa08c2ed3f2e180fa0">More...</a><br /></td></tr>
<tr class="separator:ga56b9d7c1429ae4fa08c2ed3f2e180fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga833bfbd9a170df1f81da629e5cd91845"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#ga833bfbd9a170df1f81da629e5cd91845">SNTP_EINVALIDARGS</a>&#160;&#160;&#160;(-101)</td></tr>
<tr class="memdesc:ga833bfbd9a170df1f81da629e5cd91845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input arguments are invalid.  <a href="#ga833bfbd9a170df1f81da629e5cd91845">More...</a><br /></td></tr>
<tr class="separator:ga833bfbd9a170df1f81da629e5cd91845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf888256ff0efd96efc6ad6c9a9d59020"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#gaf888256ff0efd96efc6ad6c9a9d59020">SNTP_ESOCKCREATEFAIL</a>&#160;&#160;&#160;(-102)</td></tr>
<tr class="memdesc:gaf888256ff0efd96efc6ad6c9a9d59020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failed to create a socket.  <a href="#gaf888256ff0efd96efc6ad6c9a9d59020">More...</a><br /></td></tr>
<tr class="separator:gaf888256ff0efd96efc6ad6c9a9d59020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga969984141cc5f01210c7ad1a28caf8de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#ga969984141cc5f01210c7ad1a28caf8de">SNTP_EINVALIDFAMILY</a>&#160;&#160;&#160;(-103)</td></tr>
<tr class="memdesc:ga969984141cc5f01210c7ad1a28caf8de"><td class="mdescLeft">&#160;</td><td class="mdescRight">The input socket address is not of AF_INET (IPv4) or AF_INET6 (IPv6) family type.  <a href="#ga969984141cc5f01210c7ad1a28caf8de">More...</a><br /></td></tr>
<tr class="separator:ga969984141cc5f01210c7ad1a28caf8de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6fe4f80e250d27f47dabb1d42b04b0a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#ga6fe4f80e250d27f47dabb1d42b04b0a2">SNTP_ESOCKOPTFAIL</a>&#160;&#160;&#160;(-104)</td></tr>
<tr class="memdesc:ga6fe4f80e250d27f47dabb1d42b04b0a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failed to set receive timeout on socket.  <a href="#ga6fe4f80e250d27f47dabb1d42b04b0a2">More...</a><br /></td></tr>
<tr class="separator:ga6fe4f80e250d27f47dabb1d42b04b0a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa2b08acea154cad301a43daf65eec489"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#gaa2b08acea154cad301a43daf65eec489">SNTP_ECONNECTFAIL</a>&#160;&#160;&#160;(-105)</td></tr>
<tr class="memdesc:gaa2b08acea154cad301a43daf65eec489"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failed to connect to the NTP server.  <a href="#gaa2b08acea154cad301a43daf65eec489">More...</a><br /></td></tr>
<tr class="separator:gaa2b08acea154cad301a43daf65eec489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaffe13e69ec9483c742560a774243da90"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#gaffe13e69ec9483c742560a774243da90">SNTP_ESENDFAIL</a>&#160;&#160;&#160;(-106)</td></tr>
<tr class="memdesc:gaffe13e69ec9483c742560a774243da90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failed to send a time request to the NTP server.  <a href="#gaffe13e69ec9483c742560a774243da90">More...</a><br /></td></tr>
<tr class="separator:gaffe13e69ec9483c742560a774243da90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac831a16869b7c78c044b8b92b2b85973"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#gac831a16869b7c78c044b8b92b2b85973">SNTP_ERECVFAIL</a>&#160;&#160;&#160;(-107)</td></tr>
<tr class="memdesc:gac831a16869b7c78c044b8b92b2b85973"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failed to recieve the new time from the NTP server.  <a href="#gac831a16869b7c78c044b8b92b2b85973">More...</a><br /></td></tr>
<tr class="separator:gac831a16869b7c78c044b8b92b2b85973"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6ff9ea6bae8596e917cc34725190f67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#gac6ff9ea6bae8596e917cc34725190f67">SNTP_ERATEBACKOFF</a>&#160;&#160;&#160;(-108)</td></tr>
<tr class="memdesc:gac6ff9ea6bae8596e917cc34725190f67"><td class="mdescLeft">&#160;</td><td class="mdescRight">NTP Server requests to reduce the update rate (RFC 5905 kiss code RATE)  <a href="#gac6ff9ea6bae8596e917cc34725190f67">More...</a><br /></td></tr>
<tr class="separator:gac6ff9ea6bae8596e917cc34725190f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e874080da6108182e1aa5047031ef7d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#ga6e874080da6108182e1aa5047031ef7d">SNTP_EFATALNORETRY</a>&#160;&#160;&#160;(-109)</td></tr>
<tr class="memdesc:ga6e874080da6108182e1aa5047031ef7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">NTP Server invalid or server requests to end all communications (RFC 5905 kiss code DENY or RSTR)  <a href="#ga6e874080da6108182e1aa5047031ef7d">More...</a><br /></td></tr>
<tr class="separator:ga6e874080da6108182e1aa5047031ef7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaaa17c8096e957cd35279dac7b344fe8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__net__sntp__SNTP.html#gaaaa17c8096e957cd35279dac7b344fe8">SNTP_EINVALIDRESP</a>&#160;&#160;&#160;(-110)</td></tr>
<tr class="memdesc:gaaaa17c8096e957cd35279dac7b344fe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server response with stratum == 0, with no kiss code.  <a href="#gaaaa17c8096e957cd35279dac7b344fe8">More...</a><br /></td></tr>
<tr class="separator:gaaaa17c8096e957cd35279dac7b344fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The SNTP client provides APIs to synchronize the local time with a server that provides time synchronization services using Network Time Protocol (NTP). </p>
<p>There are 3 general use cases supported:</p><ol type="1">
<li>You want to use default NTP servers (<a class="el" href="group__ti__net__sntp__SNTP.html#gaf28840559d2f511e3fc376102bbc8837" title="Obtain the UTC time from NTP servers list. ">SNTP_getTime()</a>, with a NULL server list)</li>
<li>You have the string names of one or more NTP servers (<a class="el" href="group__ti__net__sntp__SNTP.html#gaf28840559d2f511e3fc376102bbc8837" title="Obtain the UTC time from NTP servers list. ">SNTP_getTime()</a>, with your server list)</li>
<li>You have the sockaddr of the NTP server (<a class="el" href="group__ti__net__sntp__SNTP.html#ga49f27dfff681fb9bdde566c23aa6f6d8" title="Obtain the UTC time from NTP server address. ">SNTP_getTimeByAddr()</a>, with your sockaddr)</li>
</ol>
<p>The SNTP client service will return the seconds passed since January 1st 1900.</p>
<h2>Important note on NTP protocol</h2>
<p>The NTP protocol clearly specifies that an SNTP client must never send requests to an NTP server in intervals less than 15 seconds. It is important to respect this NTP requirement and it is the user's responsibility to ensure that <a class="el" href="group__ti__net__sntp__SNTP.html#gaf28840559d2f511e3fc376102bbc8837" title="Obtain the UTC time from NTP servers list. ">SNTP_getTime()</a> and/or <a class="el" href="group__ti__net__sntp__SNTP.html#ga49f27dfff681fb9bdde566c23aa6f6d8" title="Obtain the UTC time from NTP server address. ">SNTP_getTimeByAddr()</a> are not called more than once, in any 15 second time period, to contact the same NTP server.</p>
<h2>Library Usage</h2>
<p>To use the SNTP client APIs, the application should include its header file as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="sntp_8h.html">ti/net/sntp/sntp.h</a>&gt;</span></div></div><!-- fragment --><p>And, add the following SNTP library to the link line: </p><div class="fragment"><div class="line">.../source/ti/net/sntp/{toolchain}/{isa}/sntp_{profile}.a</div></div><!-- fragment --> <hr/>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga56b9d7c1429ae4fa08c2ed3f2e180fa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56b9d7c1429ae4fa08c2ed3f2e180fa0">&sect;&nbsp;</a></span>SNTP_EGETHOSTBYNAMEFAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_EGETHOSTBYNAMEFAIL&#160;&#160;&#160;(-100)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Failed to resolve Host address. </p>

</div>
</div>
<a id="ga833bfbd9a170df1f81da629e5cd91845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga833bfbd9a170df1f81da629e5cd91845">&sect;&nbsp;</a></span>SNTP_EINVALIDARGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_EINVALIDARGS&#160;&#160;&#160;(-101)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Input arguments are invalid. </p>

</div>
</div>
<a id="gaf888256ff0efd96efc6ad6c9a9d59020"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf888256ff0efd96efc6ad6c9a9d59020">&sect;&nbsp;</a></span>SNTP_ESOCKCREATEFAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_ESOCKCREATEFAIL&#160;&#160;&#160;(-102)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Failed to create a socket. </p>

</div>
</div>
<a id="ga969984141cc5f01210c7ad1a28caf8de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga969984141cc5f01210c7ad1a28caf8de">&sect;&nbsp;</a></span>SNTP_EINVALIDFAMILY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_EINVALIDFAMILY&#160;&#160;&#160;(-103)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The input socket address is not of AF_INET (IPv4) or AF_INET6 (IPv6) family type. </p>

</div>
</div>
<a id="ga6fe4f80e250d27f47dabb1d42b04b0a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6fe4f80e250d27f47dabb1d42b04b0a2">&sect;&nbsp;</a></span>SNTP_ESOCKOPTFAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_ESOCKOPTFAIL&#160;&#160;&#160;(-104)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Failed to set receive timeout on socket. </p>

</div>
</div>
<a id="gaa2b08acea154cad301a43daf65eec489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa2b08acea154cad301a43daf65eec489">&sect;&nbsp;</a></span>SNTP_ECONNECTFAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_ECONNECTFAIL&#160;&#160;&#160;(-105)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Failed to connect to the NTP server. </p>

</div>
</div>
<a id="gaffe13e69ec9483c742560a774243da90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaffe13e69ec9483c742560a774243da90">&sect;&nbsp;</a></span>SNTP_ESENDFAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_ESENDFAIL&#160;&#160;&#160;(-106)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Failed to send a time request to the NTP server. </p>

</div>
</div>
<a id="gac831a16869b7c78c044b8b92b2b85973"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac831a16869b7c78c044b8b92b2b85973">&sect;&nbsp;</a></span>SNTP_ERECVFAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_ERECVFAIL&#160;&#160;&#160;(-107)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Failed to recieve the new time from the NTP server. </p>

</div>
</div>
<a id="gac6ff9ea6bae8596e917cc34725190f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6ff9ea6bae8596e917cc34725190f67">&sect;&nbsp;</a></span>SNTP_ERATEBACKOFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_ERATEBACKOFF&#160;&#160;&#160;(-108)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NTP Server requests to reduce the update rate (RFC 5905 kiss code RATE) </p>

</div>
</div>
<a id="ga6e874080da6108182e1aa5047031ef7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e874080da6108182e1aa5047031ef7d">&sect;&nbsp;</a></span>SNTP_EFATALNORETRY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_EFATALNORETRY&#160;&#160;&#160;(-109)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NTP Server invalid or server requests to end all communications (RFC 5905 kiss code DENY or RSTR) </p>

</div>
</div>
<a id="gaaaa17c8096e957cd35279dac7b344fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaaa17c8096e957cd35279dac7b344fe8">&sect;&nbsp;</a></span>SNTP_EINVALIDRESP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNTP_EINVALIDRESP&#160;&#160;&#160;(-110)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Server response with stratum == 0, with no kiss code. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf28840559d2f511e3fc376102bbc8837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf28840559d2f511e3fc376102bbc8837">&sect;&nbsp;</a></span>SNTP_getTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t SNTP_getTime </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>srvList</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>srvCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SlNetSock.html#gabe4a9f6015bc289d3342f2e3df8ecbe7">SlNetSock_Timeval_t</a> *&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>ntpTimeStamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the UTC time from NTP servers list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">srvList</td><td>optional string array of server names </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">srvCount</td><td>number of entities in <code>srvList</code> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>length of time to wait for NTP server reply </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ntpTimeStamp</td><td>time value from server in NTP timestamp format</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><code>srvList</code> can be <code>NULL</code> to use the default list of NTP servers. In this case, <code>srvCount</code> must be set to zero.</dd>
<dd>
If <code>srvList</code> is non-NULL, <code>srvCount</code> must indicate the number of servers in the <code>srvList</code> array.</dd>
<dd>
Both IPv4 and IPv6 unicast server addresses are supported (address is internally resolved).</dd>
<dd>
If <code>srvList</code> is NULL and <code>srvCount</code> is zero, a default list of time servers will be used.</dd>
<dd>
The caller is responsible for correctly setting <code>timeout</code>. If a value of NULL is passed, the default timeout behavior for the socket will apply.</dd>
<dd>
<code>ntpTimeStamp</code> contains time values which match the NTP timestamp specified by RFC 4330. That is, the upper 32 bits will contain the number of seconds since January 1st 1900, and the lower 32 bits will contain the seconds fraction. Both values are unsigned entities.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Success: 0 </dd>
<dd>
Failure: SNTP error</dd></dl>
<dl class="section user"><dt>Examples</dt><dd><div class="fragment"><div class="line">int32_t  retVal;</div><div class="line">uint32_t seconds;</div><div class="line">uint32_t secondsFraction;</div><div class="line"><a class="code" href="group__SlNetSock.html#gabe4a9f6015bc289d3342f2e3df8ecbe7">SlNetSock_Timeval_t</a> timeval;</div><div class="line">uint64_t ntpTimeStamp = 0;</div><div class="line"></div><div class="line">timeval.tv_sec  = 5;</div><div class="line">timeval.tv_usec = 0;</div><div class="line">retVal = <a class="code" href="group__ti__net__sntp__SNTP.html#gaf28840559d2f511e3fc376102bbc8837">SNTP_getTime</a>(NULL, 0, &amp;timeval, &amp;ntpTimeStamp);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (retVal == 0) {</div><div class="line">    <span class="comment">// The seconds value is stored in the upper 32 bits</span></div><div class="line">    seconds = (0xFFFFFFFF00000000 &amp; ntpTimeStamp) &gt;&gt; 32;</div><div class="line">    <span class="comment">// The seconds fraction is stored in the lower 32 bits</span></div><div class="line">    secondsFraction = ntpTimeStamp;</div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ga49f27dfff681fb9bdde566c23aa6f6d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49f27dfff681fb9bdde566c23aa6f6d8">&sect;&nbsp;</a></span>SNTP_getTimeByAddr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t SNTP_getTimeByAddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSlNetSock__Addr__t.html">SlNetSock_Addr_t</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SlNetSock.html#gabe4a9f6015bc289d3342f2e3df8ecbe7">SlNetSock_Timeval_t</a> *&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>ntpTimeStamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the UTC time from NTP server address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">server</td><td>IPv4 or IPv6 address of the NTP server </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>length of time to wait for NTP server reply </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ntpTimeStamp</td><td>time value from server in NTP timestamp format</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>The server address can be either an IPv4 address (<a class="el" href="structSlNetSock__AddrIn__t.html" title="SlNetSock IPv4 address, Internet style. ">SlNetSock_AddrIn_t</a>) or an IPv6 (<a class="el" href="structSlNetSock__AddrIn6__t.html" title="SlNetSock IPv6 address, Internet style. ">SlNetSock_AddrIn6_t</a>). The generic <a class="el" href="structSlNetSock__Addr__t.html" title="IpV4 socket address. ">SlNetSock_Addr_t</a> type of the <code>server</code> parameter is to allow either IPv4 or IPv6 structs to be provided.</dd>
<dd>
The caller is responsible for correctly setting <code>timeout</code>. If a value of NULL is passed, the default timeout behavior for the socket will apply.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Success: 0 </dd>
<dd>
Failure: SNTP error</dd></dl>
<dl class="section user"><dt>Examples</dt><dd><div class="fragment"><div class="line">int32_t  retVal;</div><div class="line">uint32_t seconds;</div><div class="line">uint32_t secondsFraction;</div><div class="line"><a class="code" href="group__SlNetSock.html#gabe4a9f6015bc289d3342f2e3df8ecbe7">SlNetSock_Timeval_t</a> timeval;</div><div class="line">uint64_t ntpTimeStamp = 0;</div><div class="line"><a class="code" href="structSlNetSock__AddrIn__t.html">SlNetSock_AddrIn_t</a> ipv4addr;</div><div class="line"></div><div class="line">ipv4addr.<a class="code" href="structSlNetSock__AddrIn__t.html#a9513f9fa22bb590c39b24bfbd9903e19">sin_family</a> = <a class="code" href="group__SlNetSock.html#ga0518da6a55b73912d74671b77d010565">SLNETSOCK_AF_INET</a>;</div><div class="line">ipv4addr.<a class="code" href="structSlNetSock__AddrIn__t.html#a0cb27a717e5f4fbfe6a2935987532cd8">sin_port</a> = <a class="code" href="group__SlNetUtils.html#ga625dce8534729932d619072a9412d9ee">SlNetUtil_htons</a>(SNTP_PORT);</div><div class="line">ipv4addr.<a class="code" href="structSlNetSock__AddrIn__t.html#a521c184cd338025af99803d1ea11f982">sin_addr</a>.<a class="code" href="structSlNetSock__InAddr__t.html#a7dec588a9be0d55cced4a8e1737a3bba">s_addr</a> = <a class="code" href="group__SlNetUtils.html#gad8841854e4de9257ec8b564e16ad203a">SlNetUtil_htonl</a>(addr);</div><div class="line"></div><div class="line">timeval.tv_sec  = 5;</div><div class="line">timeval.tv_usec = 0;</div><div class="line">retVal = <a class="code" href="group__ti__net__sntp__SNTP.html#ga49f27dfff681fb9bdde566c23aa6f6d8">SNTP_getTimeByAddr</a>((<a class="code" href="structSlNetSock__Addr__t.html">SlNetSock_Addr_t</a> *)&amp;ipv4addr, &amp;timeval,</div><div class="line">        &amp;ntpTimeStamp);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (retVal == 0) {</div><div class="line">    <span class="comment">// The seconds value is stored in the upper 32 bits</span></div><div class="line">    seconds = (0xFFFFFFFF00000000 &amp; ntpTimeStamp) &gt;&gt; 32;</div><div class="line">    <span class="comment">// The seconds fraction is stored in the lower 32 bits</span></div><div class="line">    secondsFraction = ntpTimeStamp;</div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2020</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
