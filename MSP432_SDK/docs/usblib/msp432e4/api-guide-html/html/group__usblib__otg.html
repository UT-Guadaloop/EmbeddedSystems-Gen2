<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>USBLibAPIGuide: Usblib_otg</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="https://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">USBLibAPIGuide
   &#160;<span id="projectnumber">1.00.00.01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Usblib_otg</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae287d93cab65b863a274cefb039c920f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usblib__otg.html#gae287d93cab65b863a274cefb039c920f">USBOTGModeTerm</a> (uint32_t ui32Index)</td></tr>
<tr class="separator:gae287d93cab65b863a274cefb039c920f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0f7d6138d7d6224d813f08d32a19e1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usblib__otg.html#gaf0f7d6138d7d6224d813f08d32a19e1b">USBOTGModeInit</a> (uint32_t ui32Index, uint32_t ui32PollingRate, void *pvPool, uint32_t ui32PoolSize)</td></tr>
<tr class="separator:gaf0f7d6138d7d6224d813f08d32a19e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7fa2ac89dd7729ffaa06f2f5095901f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usblib__otg.html#gad7fa2ac89dd7729ffaa06f2f5095901f">USBOTGPollRate</a> (uint32_t ui32Index, uint32_t ui32PollRate)</td></tr>
<tr class="separator:gad7fa2ac89dd7729ffaa06f2f5095901f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e4b3a14f920e47677d531ecf644699e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usblib__otg.html#ga3e4b3a14f920e47677d531ecf644699e">USB0_IRQOTGModeHandler</a> (void)</td></tr>
<tr class="separator:ga3e4b3a14f920e47677d531ecf644699e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga66296ccc0b4f0d2bf2e12fc3d5b11435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usblib__otg.html#ga66296ccc0b4f0d2bf2e12fc3d5b11435">OTGDeviceDisconnect</a> (uint32_t ui32Index)</td></tr>
<tr class="separator:ga66296ccc0b4f0d2bf2e12fc3d5b11435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafafe22aa65f5fdd012005a8ad72dad21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usblib__otg.html#gafafe22aa65f5fdd012005a8ad72dad21">USBOTGMain</a> (uint32_t ui32MsTicks)</td></tr>
<tr class="separator:gafafe22aa65f5fdd012005a8ad72dad21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf1f36b98c3b943b1fe7f28d6155c18ce"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usblib__otg.html#gaf1f36b98c3b943b1fe7f28d6155c18ce">USBOTGFeatureSet</a> (uint32_t ui32Index, uint32_t ui32Feature, void *pvFeature)</td></tr>
<tr class="separator:gaf1f36b98c3b943b1fe7f28d6155c18ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae287d93cab65b863a274cefb039c920f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae287d93cab65b863a274cefb039c920f">&sect;&nbsp;</a></span>USBOTGModeTerm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBOTGModeTerm </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the USB controller to and inactive state when in OTG mode operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Index</td><td>specifies the USB controller to end OTG mode operations.</td></tr>
  </table>
  </dd>
</dl>
<p>Applications using OTG mode may call this function to disable interrupts in preparation for shutdown or a change of operating mode.</p>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

<p>References <a class="el" href="group__device__api.html#ga27b6c816090a56f7808dab2c5e816cc4">g_psDCDInst</a>.</p>

</div>
</div>
<a id="gaf0f7d6138d7d6224d813f08d32a19e1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf0f7d6138d7d6224d813f08d32a19e1b">&sect;&nbsp;</a></span>USBOTGModeInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBOTGModeInit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32PollingRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvPool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32PoolSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the USB controller for OTG mode operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Index</td><td>specifies the USB controller that is to be initialized for OTG mode operation. </td></tr>
    <tr><td class="paramname">ui32PollingRate</td><td>is the rate in milliseconds to poll the controller for changes in mode. </td></tr>
    <tr><td class="paramname">pvPool</td><td>is a pointer to the data to use as a memory pool for this controller. </td></tr>
    <tr><td class="paramname">ui32PoolSize</td><td>is the size in bytes of the buffer passed in as <em>pvPool</em>.</td></tr>
  </table>
  </dd>
</dl>
<p>This function initializes the USB controller hardware into a state suitable for OTG mode operation. Applications must use this function to ensure that the controller is in a neutral state and able to receive appropriate interrupts before host or device mode is chosen by OTG negotiation. The <em>ui32PollingRate</em> parameter is used to set the rate at which the USB library will poll the controller to determine the mode. This has the most effect on how quickly the USB library will detect changes when going to host mode. The parameters <em>pvPool</em> and <em>ui32PoolSize</em> are passed on to the USB host library functions to provide memory for the USB library when it is acting as a host. Any device and host initialization should have been called before calling this function to prevent the USB library from attempting to run in device or host mode before the USB library is fully configured.</p>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

<p>References <a class="el" href="group__general__usblib__api.html#gga31e8cc45b2a98ae64491dc055114b628a2a6fab83dddeb4abd6c76c78124b145a">eUSBModeOTG</a>, and <a class="el" href="group__general__usblib__api.html#gafc6aafb732127c6f1d9cb66d738c6607">g_iUSBMode</a>.</p>

</div>
</div>
<a id="gad7fa2ac89dd7729ffaa06f2f5095901f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7fa2ac89dd7729ffaa06f2f5095901f">&sect;&nbsp;</a></span>USBOTGPollRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBOTGPollRate </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32PollRate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This call sets the USB OTG controllers poll rate when checking for the mode of the controller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Index</td><td>specifies which USB controller to set the polling rate. </td></tr>
    <tr><td class="paramname">ui32PollRate</td><td>is the rate in milliseconds to poll for changes in the controller mode.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is called to set the USB OTG libraries polling rate when checking the status of the cable. The <em>ui32PollRate</em> value used sets the rate in milliseconds that the USB OTG library will poll the cable to see if the controller should enter host mode. This value has no effect on device detection rate as the controller will detect being connected to a host controller automatically. The <em>ui32PollRate</em> can be set to 0 to disable polling. The USB OTG library can still function with the polling rate set to zero, however it will fail to detect host mode properly when no device is present at the end of the USB OTG B side of the cable.</p>
<dl class="section note"><dt>Note</dt><dd>This function should only be called on devices that support OTG functionality.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

<p>References <a class="el" href="group__general__usblib__api.html#ga047cb1187d56d649dd5eda319fe23c8a">g_ui32PollRate</a>.</p>

</div>
</div>
<a id="ga3e4b3a14f920e47677d531ecf644699e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3e4b3a14f920e47677d531ecf644699e">&sect;&nbsp;</a></span>USB0_IRQOTGModeHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USB0_IRQOTGModeHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handles OTG mode changes and also steers other USB interrupts from the controller to the correct handler in the USB stack.</p>
<p>This interrupt handler is used in applications which require to operate in both host and device mode using OTG. When in host or device mode, it steers the USB hardware interrupt to the correct handler in the USB stack depending upon the current operating mode. It also handles other OTG related interrupt events.</p>
<p>For successful OTG mode operation, an application must register <a class="el" href="group__usblib__otg.html#ga3e4b3a14f920e47677d531ecf644699e">USB0_IRQOTGModeHandler()</a> in the CPU vector table as the interrupt handler for the USB0 interrupt.</p>
<dl class="section note"><dt>Note</dt><dd>This interrupt handler should only be used on controllers that support OTG functionality.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

<p>References <a class="el" href="group__general__usblib__api.html#ggaded7d9b37df85ca90e41af1e6f689613aaf76a56955110c0fd0f69d83cbe05851">eUSBOTGModeBWaitCon</a>, <a class="el" href="group__general__usblib__api.html#ga830335f7a4fe3752317f6114f12307fe">g_eOTGModeState</a>, <a class="el" href="group__usblib__hcd.html#gaf9221b274d44b252f310f30447331ed1">InternalUSBHCDSendEvent()</a>, <a class="el" href="structt_event_info.html#a0c0261beed1760bd2f94b05e94a38115">tEventInfo::ui32Event</a>, <a class="el" href="structt_event_info.html#acbf053ec71e88df1a651f3a6d0806fd7">tEventInfo::ui32Instance</a>, <a class="el" href="group__usblib__events.html#ga41b5eeb6a1cc1335fe539042b37c5575">USB_EVENT_POWER_ENABLE</a>, <a class="el" href="usbhostpriv_8h.html#a8cb5168c1cb020bf0506f550965bb5d8">USBHCD_EVFLAG_PWREN</a>, and <a class="el" href="group__usblib__hcd.html#gaad70e65f97918456bc3a706fb2edd6a3">USBHCDPowerAutomatic()</a>.</p>

</div>
</div>
<a id="ga66296ccc0b4f0d2bf2e12fc3d5b11435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga66296ccc0b4f0d2bf2e12fc3d5b11435">&sect;&nbsp;</a></span>OTGDeviceDisconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OTGDeviceDisconnect </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="group__general__usblib__api.html#ggaded7d9b37df85ca90e41af1e6f689613a2e55713b539035c755ddfc2499eb8b62">eUSBOTGModeAHost</a>, and <a class="el" href="group__general__usblib__api.html#ga830335f7a4fe3752317f6114f12307fe">g_eOTGModeState</a>.</p>

</div>
</div>
<a id="gafafe22aa65f5fdd012005a8ad72dad21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafafe22aa65f5fdd012005a8ad72dad21">&sect;&nbsp;</a></span>USBOTGMain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBOTGMain </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32MsTicks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is the main routine for the OTG Controller Driver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32MsTicks</td><td>is the number of milliseconds that have passed since the last time this function was called.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is the main routine for the USB controller when using the library in OTG mode. This routine must be called periodically by the main application outside of a callback context. The <em>ui32MsTicks</em> value is used for basic timing needed by the USB library when operating in OTG mode. This allows for a simple cooperative system to access the the OTG controller driver interface without the need for an RTOS. All time critical operations are handled in interrupt context but all longer operations are run from the this function to allow them to block and wait for completion without holding off other interrupts.</p>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

<p>References <a class="el" href="group__general__usblib__api.html#ggaded7d9b37df85ca90e41af1e6f689613ad27b94149ebd752d51688fb7e6acf2ab">eUSBOTGModeIdle</a>, <a class="el" href="group__general__usblib__api.html#ggaded7d9b37df85ca90e41af1e6f689613a804a983f079213830ee95fc2587f5a07">eUSBOTGModeWait</a>, <a class="el" href="group__general__usblib__api.html#ggaded7d9b37df85ca90e41af1e6f689613aa1323cefb9f788a26457d7af0e2979e5">eUSBOTGModeWaitID</a>, <a class="el" href="group__general__usblib__api.html#ga830335f7a4fe3752317f6114f12307fe">g_eOTGModeState</a>, <a class="el" href="group__general__usblib__api.html#ga047cb1187d56d649dd5eda319fe23c8a">g_ui32PollRate</a>, and <a class="el" href="group__general__usblib__api.html#gac78691fc2c849004b53ce2f67fc5f3a2">g_ui32WaitTicks</a>.</p>

</div>
</div>
<a id="gaf1f36b98c3b943b1fe7f28d6155c18ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf1f36b98c3b943b1fe7f28d6155c18ce">&sect;&nbsp;</a></span>USBOTGFeatureSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBOTGFeatureSet </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Feature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvFeature</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sets one of the <b>USBLIB_FEATURE_</b> requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Index</td><td>is the index of the USB controller to access. </td></tr>
    <tr><td class="paramname">ui32Feature</td><td>is one of the <b>USBLIB_FEATURE_</b> defines. </td></tr>
    <tr><td class="paramname">pvFeature</td><td>is a pointer to the data for the <b>USBLIB_FEATURE</b> request.</td></tr>
  </table>
  </dd>
</dl>
<p>This function sends the requested feature request to the USB library. Not all features are supported by all devices so see the documentation for the <b>USBLIB_FEATURE_</b> to determine if the feature is supported.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns <b>true</b> if the feature was set and <b>false</b> if the feature is not supported or could not be changed to the requested value. </dd></dl>

<p>References <a class="el" href="group__device__api.html#ga9c15764d78336cd4542612bc3651e5d4">USBDCDFeatureSet()</a>, and <a class="el" href="group__usblib__hcd.html#ga0e587ab23242d4de2ac5a6052f7afead">USBHCDFeatureSet()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2020</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
